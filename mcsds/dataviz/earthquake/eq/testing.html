<html>
<head>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/d3/4.10.0/d3.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/topojson/1.6.20/topojson.js"></script>

</head>
<body>

<h1>Earthquakes in the last 24 Hours</h1>

<script>
// Setup the svg element size and margins
var margin = {top: 20, right: 20, bottom: 20, left: 20},
width = 720 - margin.left - margin.right,
height = 500 - margin.top - margin.bottom;

// Set the projection methods for the world map
var projection = d3.geoMercator()
.translate([width/2, height/1.5])
.scale((width - 1) / 2 / Math.PI);

// Set the world map path
var path = d3.geoPath()
.projection(projection);

// Create a variable to hold the main svg element
var svg = d3.select("body").append("svg")
.attr("width", width)
.attr("height", height)
    .attr("fill", "none")
    .attr("stroke", "#000")
    .attr("stroke-linejoin", "round")
    .attr("");

// Group to hold the maps and borders
var g = svg.append('g')
.attr('id', 'world-map');

// Add a clip path element to the world map group
// for the x axis
g.append('clipPath')
.attr('id', 'clip-path')
.append('rect')
.attr('x', 0)
.attr('y', 30)
.attr('width', width)
.attr('height', height - 30);

// Group to hold all of the earthquake elements
var gQuakes = svg.append('g')
.attr('id', 'all-quakes');

// Import the geoJSON file for the world map
d3.json('https://unpkg.com/us-atlas@1/us/10m.json', function(error, us) {
if(error) throw error;

// Append the US Map
var worldMap = g.append('path')
    .attr('clip-path', 'url(#clip-path)') // attaches the clip path to not draw the map underneath the x axis
    .datum(topojson.merge(us, us.objects.counties)) // draws a single land object for the entire map
    .attr('d', path);

// Append the World Map County Borders
g.append('path')
    .datum(topojson.mesh(us, us.objects.states, function(a, b) { return a !== b; }))
    .attr('class', 'boundry')
    .attr('d', path);
});
</script>








</body>
</html>